# 2 

准备工作：
PC：win10专业版
VMware16
虚拟机：Ubuntu-20.04-server
```shell
$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 20.04.6 LTS
Release:        20.04
Codename:       focal
```

```
note: 虚拟机设置 -> 硬件 -> 处理器 -> 虚拟化引擎 配置项中，开启【虚拟化Intel VT-x/EPT 或 AMD-V/RVI(V)】 和 【虚拟化 IOMMU (IO 内存管理单元)(I)】
```

## 2.2 

- 安装通用开发工具 gcc：
```shell
# apt install build-essential
# gcc --version
gcc (Ubuntu 9.4.0-1ubuntu1~20.04.2) 9.4.0
Copyright (C) 2019 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
# apt install pkg-config
# pkg-config --version
0.29.1
```

- 安装 python
```shell
# python3 --version
Python 3.8.10
# apt install python3-pip
# pip3 --version
pip 20.0.2 from /usr/lib/python3/dist-packages/pip (python 3.8)
```

- 安装 Meson 和 ninja
```shell
# pip3 install meson ninja
# meson --version
1.4.0
# ninja --version
1.11.1.git.kitware.jobserver-1
```

- 安装 pyelftools
```shell
# apt install python3-pyelftools
# python3
Python 3.8.10 (default, Nov 22 2023, 10:22:35)
[GCC 9.4.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import elftools
>>>
```

- 安装处理 NUMA 的库
```shell
# apt install libnuma-dev
# dpkg -s libnuma-dev
Package: libnuma-dev
Status: install ok installed
Priority: optional
Section: libdevel
Installed-Size: 153
Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Architecture: amd64
Multi-Arch: same
Source: numactl
Version: 2.0.12-1
Depends: libnuma1 (= 2.0.12-1), libc6-dev | libc-dev
Description: Development files for libnuma
 Library to control specific NUMA (Non-Uniform Memory Architecture)
 scheduling or memory placement policies.  This package contains
 headers and manual pages relating to the library.
Original-Maintainer: Ian Wienand <ianw@debian.org>
Homepage: https://github.com/numactl/numactl

```

### 2.3.1

- 系统内核版本
```shell
# uname -r
5.4.0-153-generic
```

- glibc
```shell
ldd --version
ldd (Ubuntu GLIBC 2.31-0ubuntu9.14) 2.31
Copyright (C) 2020 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
Written by Roland McGrath and Ulrich Drepper.
```

### 2.3.2 

运行时保留大页
```shell
# echo 1024 > /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages
# cat /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages
1024
# cat /sys/devices/system/node/node0/hugepages/hugepages-2048kB/nr_hugepages
1024
# cat /proc/meminfo | grep HugePages
```

## 3

准备工作：
下载源码：https://github.com/DPDK/dpdk
版本：23.11

## 3.1 解压 DPDK 
```
# tar -xvf dpdk-23.11.tar.gz
# cd dpdk-23.11
# ls -l
total 132
-rw-rw-r--  1 root root     5 Nov 28 14:35 ABI_VERSION
drwxrwxr-x 23 root root  4096 Nov 28 14:35 app
drwxrwxr-x  5 root root  4096 Nov 28 14:35 buildtools
drwxrwxr-x  7 root root  4096 Nov 28 14:35 config
drwxrwxr-x  3 root root  4096 Nov 28 14:35 devtools
drwxrwxr-x  5 root root  4096 Nov 28 14:35 doc
drwxrwxr-x 16 root root  4096 Nov 28 14:35 drivers
drwxrwxr-x  4 root root  4096 Nov 28 14:35 dts
drwxrwxr-x 49 root root  4096 Nov 28 14:35 examples
drwxrwxr-x  3 root root  4096 Nov 28 14:35 kernel
drwxrwxr-x 58 root root  4096 Nov 28 14:35 lib
drwxrwxr-x  2 root root  4096 Nov 28 14:35 license
-rw-rw-r--  1 root root 50371 Nov 28 14:35 MAINTAINERS
-rw-rw-r--  1 root root   219 Nov 28 14:35 Makefile
-rw-rw-r--  1 root root  5337 Nov 28 14:35 meson.build
-rw-rw-r--  1 root root  4473 Nov 28 14:35 meson_options.txt
-rw-rw-r--  1 root root   510 Nov 28 14:35 README
drwxrwxr-x  2 root root  4096 Nov 28 14:35 usertools
-rw-rw-r--  1 root root     8 Nov 28 14:35 VERSION

```

## 3.2

```
# meson setup build
# cd build
# ninja
# meson install
# ldconfig
```